{% extends "base.html" %}
{% load render_table from django_tables2 %}

{% block title %}
Departments View
{% endblock %}

{% block content %}

<h2> Departments </h2>

 <div class="mycard">
<a href="{% url 'department_create_url' %}" class="btn btn-primary">Add New Record</a>
        <button id="exportCsvButton" type="button" class="btn btn-light">Export</button>
      <a href="{% url 'department_tree' %}" class="btn btn-secondary"> <i class="bi bi-list-nested"></i> Tree View</a>

   {% load django_tables2 %}
   {% render_table table %}
      <script>
document.getElementById('exportCsvButton').addEventListener('click', function() {
    var currentUrl = window.location.href;  // Get the current URL
    var newUrl = currentUrl.includes('?') ? currentUrl + '&_export=csv' : currentUrl + '?_export=csv';
    // Redirect to the new URL
    window.location.href = newUrl;
});
</script>
 </div>
{% endblock %}
